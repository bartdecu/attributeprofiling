##Resourceless attribute profiling in FHIR

This is a mock example of the functionality that a preprocessor (e.g. SUSHI) could have with regard
to attribute level profiles that are not bound to a specific resource.

In the case of implementation by a preprocessor, the attribute level profile will result in a new profile (StructureDefinition) for each existing StructureDefinition that matches the contraints expressed in the attribute level profile.

The author defines an attribute profile in a file (here gender.koi)

This file contains the following information
* the name of an attribute, without linking it to a specific StructureDefinition (id).
* a matching constraint, containing elements of the StructureDefinition(s) that this attribute can be used in. If these constraints evaluate to true, i.e. if the paths in the constraints exist in the navigation model of the StructureDefinition, the StructureDefinition is a candidate for additional constraints on the attribute (path).
* the additional constraint(s), in the form of the elements of an ElementDefinition, that will be added as a differential to any StructureDefinition that matches the constraints expressed in (path).

The candidate StructureDefinitions, those that are eligible for modification by the attribute level profile, and thus will be copied and extended with the extra differential in the current package, are all StructureDefinitions that can be reached through the dependencies of the current package. As cyclic dependencies are not allowed, this will always result in a scope that will be one section of the dependency tree, even if other packages have the current package as a dependency. 

You can find the StructureDefinitions that should be generated by the preprocessor (here: SUSHI) in the directory fsh-generated/resources, containing the extra differential.
